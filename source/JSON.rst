=====================
Данные в формате JSON
=====================

`JSON`_ - простой, легко читаемый и в то же время надежный формат передачи данных,
в силу чего сейчас набирает все больше популярности. И следовательно, для его
обработки производится масса качественного ПО на многих языках.

.. _`JSON`: http://ru.wikipedia.org/wiki/JSON
.. highlight:: javascript

Мы принимаем данные в этом формате, с очень простой структурой: *массив/список
объектов с определенными* :doc:`атрибутами </attributes>`. Каждый объект
описывает квартиру, дом и т.д.

В следующем примере выдачи - три квартиры, находящиеся на 1-ом этаже 2-ой
секции 3-го корпуса 4-ой очереди::

    [
        {
            "quarter_number": 4,
            "building_number": 3,
            "section_number": 2,
            "floor_number": 1,
            "number": 1,
            "room_count": 2,
            "square": 34.6,
            "status": 1,
            "cost_per_meter": 5200.78
        },
        {
            "quarter_number": 4,
            "building_number": 3,
            "section_number": 2,
            "floor_number": 1,
            "number": 2,
            "room_count": 4,
            "square": 94.67,
            "status": 1,
            "cost_per_meter": 5200.78
        },
        {
            "quarter_number": 4,
            "building_number": 3,
            "section_number": 2,
            "floor_number": 1,
            "number": 3,
            "room_count": 3,
            "square": 60.1,
            "status": 1,
            "cost_per_meter": 5200.78
        },
    ]

.. note::
   Порядок объектов не имеет значения.

JSON для прямого подключения к сайту
====================================

Если имеется возможность выложить JSON на `публичный сервер`, способный
выдерживать базовую нагрузку, мы можем подключить его непсредственно к вашему
сайту и это даст следующие преимущества:

* отпадает необходимость нашего участия в обновлении данных по запросу - на
  вашем сайте *всегда отображаются актуальные данные*

Для корректной работы в JSON-выдачу "для сайта" нужно внести следующие
изменения:

* заменить полные имена :doc:`атрибутов </attributes>` на сокращенные
  (для сокращения объема файла)
* каждый объект квартиры должен иметь :doc:`уникальный идентификатор </id>`
  и, следовательно, выдача превращается из простого массива в ассоциативный
* убрать всякое форматирование (пробелы, переносы строки) для максимального
  сжатия файла

Пример приведенной выше выдачи в формате "для сайта" (не применено сжатие для
читаемости)::

    {
        "4-3-1":{"q": 4,
                 "b": 3,
                 "s": 2,
                 "f": 1,
                 "n": 1,
                 "rc": 2,
                 "sq": 34.6,
                 "st": 1,
                 "cpm": 5200.78},
        "4-3-2":{"q": 4,
                 "b": 3,
                 "s": 2,
                 "f": 1,
                 "n": 2,
                 "rc": 4,
                 "sq": 94.67,
                 "st": 1,
                 "cpm": 5200.78},
        "4-3-3":{"q": 4,
                 "b": 3,
                 "s": 2,
                 "f": 1,
                 "n": 3,
                 "rc": 3,
                 "sq": 60.1,
                 "st": 1,
                 "cpm": 5200.78}
    }

Где ``4-3-1``, ``4-3-2`` и ``4-3-3`` - :doc:`уникальные идентификаторы </id>`,
состоящие из номера `очереди`, номера `корпуса` и номера `квартиры`

 .. note::
    в нашем примере номер квартиры уникален для корпуса, поэтому мы можем
    исключить из идентификатора номер секции и номер этажа

